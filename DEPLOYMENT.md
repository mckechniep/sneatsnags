# Deployment Guide

## Overview
This application is configured for deployment with:
- **Backend**: Render (Node.js service with PostgreSQL)
- **Frontend**: Vercel (Static site deployment)

## Backend Deployment (Render)

### 1. Prerequisites
- Push your code to a Git repository (GitHub, GitLab, etc.)
- Create a Render account

### 2. Deploy to Render
1. Connect your repository to Render
2. The `render.yaml` file will automatically configure:
   - Web service for the backend
   - PostgreSQL database
   - Environment variables

### 3. Environment Variables
Set these in your Render dashboard:
- `STRIPE_SECRET_KEY` - Your Stripe secret key
- `STRIPE_PUBLISHABLE_KEY` - Your Stripe publishable key
- `STRIPE_WEBHOOK_SECRET` - Your Stripe webhook secret
- `SMTP_USER` - Your email address
- `SMTP_PASS` - Your email password/app password
- `FROM_EMAIL` - Your from email
- `TICKETMASTER_API_KEY` - Your Ticketmaster API key
- `TICKETMASTER_API_SECRET` - Your Ticketmaster API secret

### 4. Database Migration
After deployment, run database migrations:
```bash
npx prisma migrate deploy
```

## Frontend Deployment (Vercel)

### 1. Prerequisites
- Push your code to a Git repository
- Create a Vercel account

### 2. Deploy to Vercel
1. Connect your repository to Vercel
2. Set the root directory to `frontend`
3. The `vercel.json` file will automatically configure the deployment

### 3. Environment Variables
The frontend uses the production API URL automatically via `.env.production`

## Production URLs
- **Frontend**: https://sneatsnags.vercel.app
- **Backend**: https://sneatsnags-backend.onrender.com
- **API**: https://sneatsnags-backend.onrender.com/api

## Important Notes

### Render Configuration
- The backend uses a free tier PostgreSQL database
- Build command: `cd backend && npm install && npm run build`
- Start command: `cd backend && npm start`

### Vercel Configuration
- Serves the React app as a static site
- All routes redirect to `index.html` for client-side routing
- Assets are cached for 1 year

### CORS Configuration
Update your backend CORS settings to allow the Vercel domain:
```javascript
const corsOptions = {
  origin: [
    'http://localhost:5173',
    'https://sneatsnags.vercel.app'
  ],
  credentials: true
};
```

### Security
- All sensitive environment variables are configured in Render
- JWT secrets are auto-generated by Render
- Database connection string is automatically provided by Render

## Troubleshooting

### Backend Issues
- Check Render logs for deployment errors
- Ensure all environment variables are set
- Verify database connection

### Frontend Issues
- Check Vercel deployment logs
- Ensure API URL is correct in production
- Verify build process completes successfully

### Common Issues
1. **CORS errors**: Update backend CORS configuration
2. **Database connection**: Check DATABASE_URL in Render
3. **Environment variables**: Verify all required vars are set
4. **Build failures**: Check package.json scripts and dependencies